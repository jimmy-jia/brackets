<!DOCTYPE html>
<html>
	<head>
		<title>Research Park Ping Pong Tournament Bracket</title>
		<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
		<meta charset="utf-8">
		<link href="style.css" rel="stylesheet" type="text/css">
		<link href="bracket.css" rel="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="https://cdn.firebase.com/js/client/2.1.0/firebase.js"></script>
		<script src="bracket.js"></script>
		<script>
			var apiurl = "https://api.myjson.com/bins/48dz4";
			var bracketdata;
			function onload(){
				$.get("https://api.myjson.com/bins/48dz4", function(data, textStatus, jqXHR) {
					var json = JSON.stringify(data);
					bracketdata = data;
					$(function() {
		    			$('#bracket').bracket({
		      			init: bracketdata,
		      			save: saveFn,
		      			userData: "https://api.myjson.com/bins/48dz4"});
		  			});
				});
			}
			function saveFn(data, userData) {
				var sendData = JSON.stringify(bracketdata);
				$.ajax({
			        url: "https://api.myjson.com/bins/48dz4",
			        type: "PUT",
			        data: sendData,
			        contentType: "application/json; charset=utf-8",
			        dataType: "json",
			        success: function (data, textStatus, jqXHR) {
			            // do update
			            console.log(data)
			            alert(textStatus)
			        }
			    });
			}

		</script>
	</head>
	<body onload="onload()">
		<h1>Research Park Ping Pong Tournament Bracket 2015</h1>
			<div id="bracket">
			</div>

	</body>
</html>



